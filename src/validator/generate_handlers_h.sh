#!/bin/bash

DIR=$1
OUTFILE=$1/handlers.h

if [ "$#" -ne 1 ]; then
  echo "USAGE: $0 <directory of src/validator>"
  exit 1
fi

echo "// handlers.h" > $OUTFILE
echo "// WARNING: this file is autogenerated.  See $0." >> $OUTFILE
echo "" >> $OUTFILE
echo "#include \"src/validator/legacy/legacy.h\"" >> $OUTFILE
ls -1 $DIR/handlers/*.h | sed "s/^/#include \"/g" | sed "s/$/\"/g" >> $OUTFILE
echo "" >> $OUTFILE

exit 0
